Segment Routing SR LDP interworking Clarence Filsfils Kris Michielsen Segment Routing SR LDP interworking Simple automatic and seamless interworking with LDP Role of Mapping Server Data plane interworking functionality Verify interworking forwarding entries 2015 Cisco and or its affiliates. All rights reserved. 2 Interworking Deployment Model 2015 Cisco and or its affiliates. All rights reserved. 3 Interworking Deployment Model SR to LDP LDP to SR SR over LDP LDP over SR LDP SR 2015 Cisco and or its affiliates. All rights reserved. 4 LDP to SR 2015 Cisco and or its affiliates. All rights reserved. 5 1.1.1.5 5 16005 3 2 1 LDP 4 SR LDP to SR interworking When a node is LDP enabled but its next-hop along the SPT to the destination is not LDP enabled no LDP outgoing label In this case the LDP LSP is connected to the Prefix Segment Any node on the LDP SR border installs LDP-to-SR forwarding entry(ies) Node3 installs the following LDP-to-SR forwarding entry incoming label local label allocated by LDP for 1.1.1.5 32 outgoing label Prefix Segment bound to 1.1.1.5 32 outgoing interface to Node4 This entry is derived and installed automatically no config required 2015 Cisco and or its affiliates. All rights reserved. 6 LDP to SR interworking 1 2 3 SR LDP 4 1.1.1.5 5 SID 16005 local in lbl out lbl local in lbl out lbl local in lbl out lbl local in lbl out lbl local in lbl out lbl local in lbl out lbl 16000 16000 B G R S 16000 16000 23999 B G R S 16000 16000 23999 1048575 1048575 1048575 1048575 1048575 1048575 2015 Cisco and or its affiliates. All rights reserved. 7 LDP to SR interworking LDP 1.1.1.5 32 lbl 90100 1 2 LDP 1.1.1.5 32 lbl 90007 3 SR LDP 4 1.1.1.5 5 SID 16005 local in lbl out lbl local in lbl out lbl local in lbl out lbl local in lbl out lbl 16000 16005 16005 16000 16000 B G R S 90008 90100 90100 90007 LDP LSP 1048575 1048575 23999 90007 1048575 B G R S 16000 16005 pop 23999 Prefix Segment NA 1048575 2015 Cisco and or its affiliates. All rights reserved. 8 LDP to SR interworking LDP 1.1.1.5 32 lbl 90100 1 2 LDP 1.1.1.5 32 lbl 90007 3 SR LDP 4 1.1.1.5 5 SID 16005 local in lbl out lbl local in lbl out lbl local in lbl out lbl local in lbl out lbl 16000 16000 90008 90100 90100 90007 B G R S 16000 16005 16005 23999 90007 y p o c 16005 B G R S 16000 16005 pop 23999 Prefix Segment LDP LSP 1048575 1048575 1048575 1048575 2015 Cisco and or its affiliates. All rights reserved. 9 SR to LDP 2015 Cisco and or its affiliates. All rights reserved. 10 1.1.1.5 5 4 LDP SR to LDP interworking 1 2 3 SR When a destination is not SR enabled the SR nodes don t have a prefix-SID for that destination no SR transport possible Mapping Server (MS) advertises prefix-SIDs on behalf of non-SR nodes SR nodes install Mapping Server advertised prefix-SIDs in their forwarding table Establish SR connectivity to non-SR destinations within SR domain See Mapping Server section for more details 2015 Cisco and or its affiliates. All rights reserved. 11 1.1.1.5 5 4 LDP SR to LDP interworking 1 2 3 MS Prefix-SID(1.1.1.5) 16005 SR Mapping Server advertises Prefix-SID 16005 for Node5 s loopback on behalf of Node5 It maps the prefix-SID 16005 to prefix 1.1.1.5 32 All nodes in the network receive this Mapping Server advertisement The SR-enabled nodes use the prefix-to-SID mapping to install Segment Routing forwarding entries to destination Node5 The SR nodes use the prefix-to-SID mapping if no native prefix-SID is available Node1 and 2 have SR connectivity to destination Node5 2015 Cisco and or its affiliates. All rights reserved. 12 1.1.1.5 5 MS Prefix-SID(1.1.1.5) 16005 3 2 1 SR to LDP interworking Node1 and 2 install the following SR imposition entry incoming prefix 1.1.1.5 32 outgoing label Prefix Segment 16005 bound to 1.1.1.5 32 (from Mapping Server) outgoing interface on shortest path to 1.1.1.5 32 Node1 and 2 install the following SR forwarding entry incoming label Prefix Segment 16005 bound to 1.1.1.5 32 (from Mapping Server) outgoing label Prefix Segment 16005 bound to 1.1.1.5 32 (from Mapping Server) outgoing interface on shortest path to 1.1.1.5 32 4 LDP SR 2015 Cisco and or its affiliates. All rights reserved. 13 SR to LDP interworking 1 2 3 MS Prefix-SID(1.1.1.5) 16005 1.1.1.5 5 4 LDP SR When a node is SR capable but its next-hop along the SPT to the destination is not SR capable no SR outgoing label available In this case the Prefix Segment is connected to the LDP LSP Any node on the SR LDP border installs SR-to-LDP forwarding entry(ies) Node3 installs the following SR-to-LDP forwarding entry incoming label Prefix Segment bound to 1.1.1.5 32 (from Mapping Server) outgoing label label advertised by LDP neighbor 4 for 1.1.1.5 32 outgoing interface to Node4 This entry is derived and installed automatically no config required 2015 Cisco and or its affiliates. All rights reserved. 14 SR to LDP interworking 1 2 3 SR LDP 1.1.1.5 5 4 local in lbl out lbl local in lbl out lbl local in lbl out lbl local in lbl out lbl local in lbl out lbl local in lbl out lbl local in lbl out lbl B G R S 16000 16000 23999 B G R S 16000 16000 23999 B G R S 16000 16000 23999 16000 1048575 1048575 1048575 1048575 1048575 1048575 1048575 2015 Cisco and or its affiliates. All rights reserved. 15 SR to LDP interworking Mapping Server segment-routing mapping-server prefix-sid-map ipv4 1.1.1.5 32 5 range 1 1 2 3 LDP 1.1.1.5 32 lbl 90090 LDP SR LDP 1.1.1.5 32 lbl imp-null 1.1.1.5 5 4 local in lbl out lbl local in lbl out lbl local in lbl out lbl local in lbl out lbl B G R S 16000 23999 B G R S 16000 23999 B G R S 16000 23999 16000 90002 90090 90090 pop 1048575 1048575 1048575 1048575 LDP LSP 2015 Cisco and or its affiliates. All rights reserved. 16 SR to LDP interworking Mapping Server segment-routing mapping-server prefix-sid-map ipv4 1.1.1.5 32 5 range 1 1 2 3 LDP 1.1.1.5 32 lbl 90090 LDP SR LDP 1.1.1.5 32 lbl imp-null 1.1.1.5 5 4 local in lbl out lbl local in lbl out lbl local in lbl out lbl local in lbl out lbl B G R S 16000 16005 16005 B G R S Prefix Segment 23999 16000 16005 16005 23999 B G R S 16000 16005 23999 NA 16000 90002 90090 90090 pop 1048575 1048575 1048575 1048575 LDP LSP 2015 Cisco and or its affiliates. All rights reserved. 17 SR to LDP interworking Mapping Server segment-routing mapping-server prefix-sid-map ipv4 1.1.1.5 32 5 range 1 1 2 3 LDP 1.1.1.5 32 lbl 90090 LDP SR LDP 1.1.1.5 32 lbl imp-null 1.1.1.5 5 4 local in lbl out lbl local in lbl out lbl local in lbl out lbl local in lbl out lbl B G R S 16000 16005 16005 B G R S Prefix Segment 23999 16000 16005 16005 23999 B G R S 16000 16005 23999 90090 y p o c 16000 90002 90090 90090 pop 1048575 1048575 1048575 1048575 LDP LSP 2015 Cisco and or its affiliates. All rights reserved. 18 SR over LDP SR to LDP followed by LDP to SR 2015 Cisco and or its affiliates. All rights reserved. 19 SR to LDP LDP to SR SR over LDP At SR LDP boundary the SR prefix segment is mapped to an LDP LSP SR to LDP At LDP SR boundary the LDP LSP is mapped to an SR prefix segment LDP to SR 2015 Cisco and or its affiliates. All rights reserved. 20 SR to LDP LDP to SR SR over LDP Is a mapping server needed Yes if SR Label Switched Path(s) go from SR island and terminate in LDP island In the SR island a prefix-SID is needed to install the Prefix Segment the terminating node is LDP-only a mapping server advertises a prefix-SID on behalf of the LDP-only node No if no SR Label Switched Path(s) go from SR island and terminate in LDP island The SR nodes know the prefix-SID of the destination since that node is SR as well 2015 Cisco and or its affiliates. All rights reserved. 21 LDP over SR LDP to SR followed by SR to LDP 2015 Cisco and or its affiliates. All rights reserved. 22 LDP to SR SR to LDP LDP over SR At LDP SR boundary the LDP LSP is mapped to an SR prefix segment LDP to SR At SR LDP boundary the SR prefix segment is mapped to an LDP LSP SR to LDP 2015 Cisco and or its affiliates. All rights reserved. 23 LDP to SR SR to LDP LDP over SR Is a mapping server needed Yes A prefix-SID is needed in the SR island to install the Prefix Segment The LDP-only nodes can t advertise a prefix-SID A mapping server advertises a prefix-SID on behalf of the LDP-only node 2015 Cisco and or its affiliates. All rights reserved. 24 SR LDP Interworking Notes SR LDP interworking functionality is also applied on the Topology Independent LFA (TI-LFA) backup path See TI-LFA section 2015 Cisco and or its affiliates. All rights reserved. 25 SR LDP Interworking Notes The implementation keeps packets on the same transport type SR or LDP where possible E.g. if sending LDP traffic and all nodes on a path are LDP capable only LDP labels are used If traversing an SR-only island between two SR+LDP areas LDP carried packets will become SR carried and stay SR until the destination SR SR SR SR SR LDP LDP No LDP LDP LDP 2015 Cisco and or its affiliates. All rights reserved. 26 SR LDP interworking data plane 2015 Cisco and or its affiliates. All rights reserved. 27 IGP SR and LDP programming FIB IGP 1.1.1.1 32 Loc_lbl 16001 Out_lbl 16001 RIB 1.1.1.1 32 LDP LSD 1.1.1.1 32 Loc_lbl 16001 Out_lbl 16001 1.1.1.1 32 Loc_lbl 24003 Out_lbl 24005 FIB Loc_lbl local label allocated by local node Out_lbl outgoing label 16001 SR label 24003 LDP label 2015 Cisco and or its affiliates. All rights reserved. 28 IGP SR and LDP programming FIB This diagram illustrates the default behavior prefer LDP label imposition The label imposition preference is configurable See SR LDP co-existence section IGP RIB LDP LSD 1.1.1.1 32 Loc_lbl 16001 Out_lbl 16001 FIB cef 1.1.1.1 32 24005 1.1.1.1 32 Loc_lbl 24003 Out_lbl 24005 mpls forwarding 24003 24005 16001 16001 Loc_lbl local label allocated by local node Out_lbl outgoing label 16001 SR label 24003 LDP label 2015 Cisco and or its affiliates. All rights reserved. 29 IGP SR and LDP programming FIB Downstream neighbor not LDP-capable or did not advertise an LDP label binding no outgoing LDP label IGP RIB LDP LSD 1.1.1.1 32 Loc_lbl 16001 Out_lbl 16001 FIB cef 1.1.1.1 32 1.1.1.1 32 Loc_lbl 24003 Out_lbl mpls forwarding 24003 16001 16001 Loc_lbl local label allocated by local node Out_lbl outgoing label 16001 SR label 24003 LDP label 2015 Cisco and or its affiliates. All rights reserved. 30 IGP SR and LDP programming FIB Downstream neighbor not SR-capable no outgoing SR label IGP RIB LDP LSD 1.1.1.1 32 Loc_lbl 16001 Out_lbl cef FIB 1.1.1.1 32 24005 1.1.1.1 32 Loc_lbl 24003 Out_lbl 24005 mpls forwarding 24003 24005 16001 Loc_lbl local label allocated by local node Out_lbl outgoing label 16001 SR label 24003 LDP label 2015 Cisco and or its affiliates. All rights reserved. 31 IGP SR and LDP programming FIB The RIB and LSD label entries are replaced The operation is sometimes called merge Replacing is done by replacing a RIB LSD unlabeled entry by the valid out label of LSD RIB for the same path LSD (LDP) out label is unlabeled use RIB out label RIB (SR) out label is unlabeled use LSD out label When is the out label unlabeled RIB (SR) out label is unlabeled if the downstream router is not SR-capable LSD (LDP) out label is unlabeled if the downstream router is not LDP-capable or did not advertise an LDP label binding 2015 Cisco and or its affiliates. All rights reserved. 32 SR LDP interworking SR LDP to SR SR LDP Prefix 1.1.1.5 32 Prefix-SID 16005 No SR 1 LDP No SR 2 LDP SR 3 LDP SR 4 No LDP SR 5 No LDP 2015 Cisco and or its affiliates. All rights reserved. 33 SR LDP interworking SR LDP to SR This diagram illustrates the behavior of Node3 in the topology Downstream neighbor 4 not LDP-capable no outgoing LDP label IGP RIB LDP LSD 1.1.1.5 32 Loc_lbl 16005 Out_lbl 16005 FIB cef 1.1.1.5 32 unlabeled 1.1.1.5 32 Loc_lbl 24003 Out_lbl unlabeled mpls forwarding 24003 unlabeled 16005 16005 Loc_lbl local label allocated by local node Out_lbl outgoing label 16001 SR label 24003 LDP label 2015 Cisco and or its affiliates. All rights reserved. 34 SR LDP interworking SR LDP to SR FIB automatically replaces the unlabeled entries by replacing unlabeled by the valid outgoing label from the other source Replace unlabeled by 16005 IGP RIB 1.1.1.5 32 Loc_lbl 16005 Out_lbl 16005 16005 FIB cef 16005 1.1.1.5 32 unlabeled LDP LSD 1.1.1.1 32 Loc_lbl 24003 Out_lbl unlabeled mpls forwarding 24003 unlabeled 16005 16005 16005 Loc_lbl local label allocated by local node Out_lbl outgoing label 16001 SR label 24003 LDP label 2015 Cisco and or its affiliates. All rights reserved. 35 SR LDP interworking SR LDP to SR SR LDP Prefix 1.1.1.5 32 Prefix-SID 16005 No SR 1 LDP No SR 2 LDP SR 3 LDP SR 4 No LDP SR 5 No LDP 2015 Cisco and or its affiliates. All rights reserved. 36 SR LDP interworking SR LDP to SR Prefix 1.1.1.5 32 Prefix-SID 16005 RP 0 0 CPU0 xrvr-3 show route 1.1.1.5 32 detail Routing entry for 1.1.1.5 32 Known via isis 1 distance 115 metric 20 type level-2 Installed May 2 15 47 42.950 for 00 29 30 Routing Descriptor Blocks 99.3.4.4 from 1.1.1.5 via GigabitEthernet0 0 0 1 Route metric is 20 Label 0x3e81 (16005) Tunnel ID None Extended communities count 0 Path id 1 Path ref count 0 NHID 0x2(Ref 7) Route version is 0x2b (43) Local Label 0x3e81 (16005) IP Precedence Not Set QoS Group ID Not Set Flow-tag Not Set Route Priority RIB_PRIORITY_NON_RECURSIVE_MEDIUM (7) SVD Type RIB_SVD_TYPE_LOCAL Download Priority 1 Download Version 157 No advertising protos. RP 0 0 CPU0 xrvr-3 show mpls ldp bindings 1.1.1.5 32 1.1.1.5 32 rev 20 Local binding label 24003 Remote bindings (1 peers) Peer Label ----------------- --------- 1.1.1.2 0 24004 No SR 1 LDP No SR 2 LDP SR 3 LDP SR 4 No LDP SR 5 No LDP RIB outgoing label RIB entry for 1.1.1.5 32 RIB local label LDP entry for 1.1.1.5 32 LDP local label No LDP outgoing label for the downstream neighbor 2015 Cisco and or its affiliates. All rights reserved. 37 SR LDP interworking SR LDP to SR Prefix 1.1.1.5 32 Prefix-SID 16005 RP 0 0 CPU0 xrvr-3 show cef 1.1.1.5 32 flags 1.1.1.5 32 version 111 internal 0x4000001 0x5 (ptr 0xace3dd20) 1 0x0 (0xace2655c) 0x228 (0xacbde048) leaf flags owner locked inserted leaf flags2 LDP SR merge req LDP SR merge act leaf ext flags Priority change Updated Mar 3 10 10 53.374 local adjacency 99.3.4.4 Prefix Len 32 traffic index 0 precedence n a priority 15 via 99.3.4.4 GigabitEthernet0 0 0 1 11 dependencies weight 0 class 0 flags 0x0 path-idx 0 NHID 0x0 0xacadacb8 0x0 next hop 99.3.4.4 tx adjacency local label 24003 labels imposed 16005 RP 0 0 CPU0 xrvr-3 show mpls forwarding labels 16005 Local Outgoing Prefix Outgoing Next Hop Bytes Label Label or ID Interface Switched ------ ----------- ------------------ ------------ --------------- ----------- 16005 16005 SR Pfx (idx 1) Gi0 0 0 1 99.3.4.4 0 RP 0 0 CPU0 xrvr-3 show mpls forwarding labels 24003 Local Outgoing Prefix Outgoing Next Hop Bytes Label Label or ID Interface Switched ------ ----------- ------------------ ------------ --------------- ----------- 24003 16005 1.1.1.5 32 Gi0 0 0 1 99.3.4.4 6864 No SR 1 LDP No SR 2 LDP SR 3 LDP SR 4 No LDP SR 5 No LDP LDP SR merge req flag is set no SR preference flag set prefer LDP for ip2mpls LDP SR merge act flag shows labels have been merged cef (ip2mpls) label mpls2mpls labels SR mpls2mpls labels LDP 2015 Cisco and or its affiliates. All rights reserved. 38 SR LDP interworking SR LDP to SR With sr-prefer configuration (Prefer SR over LDP) RP 0 0 CPU0 xrvr-3 show cef 1.1.1.5 32 flags 1.1.1.5 32 version 157 internal 0x4000001 0x3 (ptr 0xace3e1a0) 1 0x0 (0xace261b4) 0x228 (0xacbcde18) leaf flags owner locked inserted leaf flags2 LDP SR merge req RIB prec LSD leaf ext flags Priority change Updated Mar 3 10 10 53.375 local adjacency 99.3.4.4 Prefix Len 32 traffic index 0 precedence n a priority 1 via 99.3.4.4 GigabitEthernet0 0 0 1 11 dependencies weight 0 class 0 flags 0x0 path-idx 0 NHID 0x0 0xacadacb8 0x0 next hop 99.3.4.4 tx adjacency local label 16005 labels imposed 16005 Prefix 1.1.1.5 32 Prefix-SID 16005 No SR 1 LDP No SR 2 LDP SR 3 LDP SR 4 No LDP SR 5 No LDP LDP SR merge req flag is set SR preference flag is set prefer SR for ip2mpls cef (ip2mpls) label 2015 Cisco and or its affiliates. All rights reserved. 39 SR LDP interworking SR LDP to LDP To have interworking from SR to LDP a prefix-SID for the destination prefix must be advertised by the destination itself if it is SR-capable by the Mapping Server if the destination is not SR-capable 2015 Cisco and or its affiliates. All rights reserved. 40 SR LDP interworking SR LDP to LDP SR LDP Mapping Server Prefix 1.1.1.5 32 Prefix-SID 16005 SR 1 No LDP SR 2 No LDP SR 3 LDP No SR 4 LDP No SR 5 LDP 2015 Cisco and or its affiliates. All rights reserved. 41 IGP SR and LDP programming FIB This diagram illustrates the behavior of Node3 in the topology Downstream neighbor 4 not SR-capable no outgoing SR label IGP RIB LDP LSD 1.1.1.5 32 Loc_lbl 16005 Out_lbl unlabeled 1.1.1.5 32 Loc_lbl 24003 Out_lbl 24004 FIB cef 1.1.1.5 32 24004 mpls forwarding 24003 24004 16005 unlabeled Loc_lbl local label allocated by local node Out_lbl outgoing label 16001 SR label 24003 LDP label 2015 Cisco and or its affiliates. All rights reserved. 42 IGP SR and LDP programming FIB FIB automatically fixes up the unlabeled entries by replacing unlabeled by the valid outgoing label from the other source Replace unlabeled by 24004 IGP RIB LDP LSD 1.1.1.5 32 Loc_lbl 16005 Out_lbl unlabeled 1.1.1.5 32 Loc_lbl 24003 Out_lbl 24004 24004 FIB cef 1.1.1.5 32 24004 mpls forwarding 24003 24004 16005 unlabeled 24004 Loc_lbl local label allocated by local node Out_lbl outgoing label 16001 SR label 24003 LDP label 2015 Cisco and or its affiliates. All rights reserved. 43 SR LDP interworking SR LDP to LDP SR LDP Mapping Server Prefix 1.1.1.5 32 Prefix-SID 16005 SR 1 No LDP SR 2 No LDP SR 3 LDP No SR 4 LDP No SR 5 LDP 2015 Cisco and or its affiliates. All rights reserved. 44 SR LDP interworking SR LDP to LDP RP 0 0 CPU0 xrvr-3 show route 1.1.1.5 32 detail Routing entry for 1.1.1.5 32 Known via isis 1 distance 115 metric 20 type level-2 Installed Apr 30 17 28 10.375 for 1d22h Routing Descriptor Blocks 99.3.4.4 from 1.1.1.5 via GigabitEthernet0 0 0 0 Route metric is 20 Label None Tunnel ID None Extended communities count 0 Path id 1 Path ref count 0 NHID 0x1(Ref 4) Route version is 0x16 (22) Local Label 0x3e85 (16005) IP Precedence Not Set QoS Group ID Not Set Flow-tag Not Set Route Priority RIB_PRIORITY_NON_RECURSIVE_MEDIUM (7) SVD Type RIB_SVD_TYPE_LOCAL Download Priority 1 Download Version 139 No advertising protos. RP 0 0 CPU0 xrvr-3 show mpls ldp bindings 1.1.1.5 32 1.1.1.5 32 rev 24 Local binding label 24003 Remote bindings (1 peers) Peer Label ----------------- --------- 1.1.1.4 0 24004 no RIB outgoing label RIB entry for 1.1.1.5 32 RIB local label LDP entry for 1.1.1.5 32 LDP local label LDP outgoing label 2015 Cisco and or its affiliates. All rights reserved. 45 SR LDP interworking SR LDP to LDP RP 0 0 CPU0 xrvr-3 show cef 1.1.1.5 32 flags 1.1.1.5 32 version 88 internal 0x4000001 0x1 (ptr 0xace3e0a0) 1 0x0 (0xace362f8) 0x228 (0xacbd5338) leaf flags owner locked inserted leaf flags2 LDP SR merge req leaf ext flags Priority change Updated Apr 30 17 28 10.414 local adjacency 99.3.4.4 Prefix Len 32 traffic index 0 precedence n a priority 3 via 99.3.4.4 GigabitEthernet0 0 0 0 11 dependencies weight 0 class 0 flags 0x0 path-idx 0 NHID 0x0 0xacaa3bf0 0x0 next hop 99.3.4.4 tx adjacency local label 24003 labels imposed 24004 RP 0 0 CPU0 xrvr-3 show mpls forwarding labels 24003 Local Outgoing Prefix Outgoing Next Hop Bytes Label Label or ID Interface Switched ------ ----------- ------------------ ------------ --------------- ----------- 24003 24004 1.1.1.5 32 Gi0 0 0 0 99.3.4.4 7088 RP 0 0 CPU0 xrvr-3 show mpls forwarding labels 16005 Local Outgoing Prefix Outgoing Next Hop Bytes Label Label or ID Interface Switched ------ ----------- ------------------ ------------ --------------- ----------- 16005 24004 SR Pfx (idx 1) Gi0 0 0 0 99.3.4.4 14664 LDP SR merge req flag is set no SR preference flag set prefer LDP for ip2mpls cef (ip2mpls) label mpls2mpls labels LDP mpls2mpls labels SR 2015 Cisco and or its affiliates. All rights reserved. 46 SR LDP interworking SR LDP to LDP With sr-prefer configuration (Prefer SR over LDP) RP 0 0 CPU0 xrvr-3 show cef 1.1.1.5 32 flags 1.1.1.5 32 version 148 internal 0x4000001 0x7 (ptr 0xace3e020) 1 0x0 (0xace26340) 0x228 (0xacbcdf08) leaf flags owner locked inserted leaf flags2 LDP SR merge req RIB prec LSD LDP SR merge act leaf ext flags Priority change Updated Mar 3 10 10 53.375 local adjacency 99.3.4.4 Prefix Len 32 traffic index 0 precedence n a priority 15 via 99.3.4.4 GigabitEthernet0 0 0 0 13 dependencies weight 0 class 0 flags 0x0 path-idx 0 NHID 0x0 0xacadabf0 0x0 next hop 99.3.4.4 tx adjacency local label 16005 labels imposed 24004 LDP SR merge req flag is set SR preference flag is set prefer SR for ip2mpls LDP SR merge act flag shows labels have been merged cef (ip2mpls) label 2015 Cisco and or its affiliates. All rights reserved. 47 SR LDP interworking Overview LDP SRlocal local LDP SR label LDP SRout outgoing LDP SR label Ships in the night LDP SR LDP SR to LDP to SR LDP SR LDP LDP SR SR IP LDP SR Payload LDPlocal Payload SRlocal Payload LDP SRout Payload Depending on the preference LDPout Payload SRout Payload Payload LDPlocal Payload SRlocal Payload LDPout Payload LDPout Payload LDPout Payload Payload LDPlocal Payload SRlocal Payload SRout Payload SRout Payload SRout Payload 2015 Cisco and or its affiliates. All rights reserved. 48 Visit us cisco.com segment-routing.net Acknowledgements Ahmed Bashandy Robert Hanzl Steven Luong Stefano Previdi Peter Psenak Thank you. 