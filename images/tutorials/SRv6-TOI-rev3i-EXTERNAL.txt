SRv6 Clarence Filsfils Kris Michielsen Pablo Camarillo Fran ois Clad Disclaimer Many of the products and features described herein remain in varying stages of development and will be offered on a when-and-if-available basis. This roadmap is subject to change at the sole discretion of Cisco and Cisco will have no liability for delay in the delivery or failure to deliver any of the products or features set forth in this document. 2021 Cisco and or its affiliates. All rights reserved. Acknowledgements Ahmed Abdelsalam Clarence Filsfils Fran ois Clad Ianik Semco Jose Liste Kris Michielsen Pablo Camarillo 2021 Cisco and or its affiliates. All rights reserved. Industry at large backs up SR Strong customer adoption WEB SP DC Metro Enterprise De-facto SDN Architecture Standardization IETF Multi-vendor Consensus Open Source Linux VPP 2021 Cisco and or its affiliates. All rights reserved. Simplicity Always Prevails Furthermore with more scaleand functionality 2021 Cisco and or its affiliates. All rights reserved. SRv6 Eco-System 2021 Cisco and or its affiliates. All rights reserved. At record speed 9+ large-scale commercial deployments Softbank Iliad China Telecom LINE corporation China Unicom CERNET2 China Bank MTN Uganda NOIA Network 25+ HW linerate implementations Cisco Systems Huawei Juniper Arrcus Broadcom Barefoot Intel Marvell Mellanox Kaloom Spirent Ixia Multiple Interop Reports 11+ open-source platforms Applications Linux FD.io VPP P4 iptables nftables snort SERA ExaBGP GoBGP GoBMP Contiv-VPP 2021 Cisco and or its affiliates. All rights reserved. Cisco Supports SoftBank on First Segment Routing IPv6 Deployment in Prep for 5G Link to PR - https newsroom.cisco.com press-release- content type webcontent articleId 1969030 2021 Cisco and or its affiliates. All rights reserved. Nationwide deployment in Italy 1000 Cisco NCS 5500 1800 Iliad Nodeboxes 2021 Cisco and or its affiliates. All rights reserved. SRv6 Network Programming Introduction 2021 Cisco and or its affiliates. All rights reserved. Segment Routing Source Routing the topological and service (NFV) path is encoded in packet header Scalability the network fabric does not hold any per-flow state for TE or NFV Simplicity automation TILFA sub-50msec FRR protocol elimination LDP RSVP-TE VxLAN NSH GTP ... End-to-End DC Metro WAN 2021 Cisco and or its affiliates. All rights reserved. Two dataplane instantiations MPLS leverage the mature MPLS HW with only SW upgrade 1 segment 1 label a segment list a label stack Segment Routing IPv6 leverages RFC8200 provision for source routing extension header 1 segment 1 address a segment list an address list in the SRH 2021 Cisco and or its affiliates. All rights reserved. IPv6 provides reachability 2021 Cisco and or its affiliates. All rights reserved. IPv4 limitations work-arounds Limited address space No engineered Load Balancing No VPN No Traffic Engineering No Service Chaining Data (L5 L6 L7) Socket header (L4) IPv4 header (L3) Ethernet (L2) 2021 Cisco and or its affiliates. All rights reserved. IPv4 limitations work-arounds Limited address space NAT No engineered Load Balancing MPLS Entropy Label VxLAN UDP No VPN MPLS VPN s VxLAN No Traffic Engineering RSVP-TE SR-TE MPLS No Service Chaining NSH Data (L5 L6 L7) Socket header (L4) IPv4 header (L3) Ethernet (L2) 2021 Cisco and or its affiliates. All rights reserved. work-arounds Data (L5 L6 L7) Socket header (L4) IPv4 header (L3) NSH VxLAN (+ IP and UDP) MPLS Ethernet (L2) IPv4 limitations work-arounds Limited address space NAT No engineered Load Balancing MPLS Entropy Label VxLAN UDP No VPN MPLS VPN s VxLAN No Traffic Engineering RSVP-TE SR-TE MPLS No Service Chaining NSH Data (L5 L6 L7) Socket header (L4) IPv4 header (L3) Ethernet (L2) 2021 Cisco and or its affiliates. All rights reserved. Simplicity (back to the OSI model) Data (L5 L6 L7) Socket header (L4) IPv4 header (L3) NSH VxLAN (+ IP and UDP) MPLS Ethernet (L2) SRv6 unleashes IPv6 potential TE FRR VPN NFV Scalability Automation Single protocol 2021 Cisco and or its affiliates. All rights reserved. SR for anything Network as a Computer 2021 Cisco and or its affiliates. All rights reserved. Network instruction Locator Function 128-bit SRv6 SID Locator routed to the node performing the function Function any possible function either local to NPU or app in VM Container Flexible bit-length selection 2021 Cisco and or its affiliates. All rights reserved. Network Program Next Segment Locator 1 Function 1 Locator 2 Function 2 Locator 3 Function 3 Locator 2 Function 2 Locator 1 Function 1 Locator 3 Function 3 2021 Cisco and or its affiliates. All rights reserved. Network Program Next Segment Locator 2 Function 2 Locator 1 Function 1 Locator 3 Function 3 Locator 2 Function 2 Locator 1 Function 1 Locator 3 Function 3 2021 Cisco and or its affiliates. All rights reserved. Network Program Locator 1 Function 1 Locator 2 Function 2 Next Segment Locator 3 Function 3 Locator 2 Function 2 Locator 1 Function 1 Locator 3 Function 3 2021 Cisco and or its affiliates. All rights reserved. Network Program in the Packet Header IPv6 header Source Address Locator 1 Function 1 Segment Routing Header Active Segment Locator 1 Locator 2 Locator 3 Function 1 Function 2 Function 3 IPv6 payload TCP UDP QUIC 2021 Cisco and or its affiliates. All rights reserved. Network Program in the Packet Header IPv6 header Source Address Locator 2 Function 2 Segment Routing Header Active Segment Locator 1 Locator 2 Locator 3 Function 1 Function 2 Function 3 IPv6 payload TCP UDP QUIC 2021 Cisco and or its affiliates. All rights reserved. Network Program in the Packet Header IPv6 header Source Address Locator 3 Function 3 Segment Routing Header Active Segment Locator 1 Locator 2 Locator 3 Function 1 Function 2 Function 3 IPv6 payload TCP UDP QUIC 2021 Cisco and or its affiliates. All rights reserved. Group-Based Policy 2021 Cisco and or its affiliates. All rights reserved. TAG Segments Left Locator 1 Locator 2 Locator 3 Function 1 Function 2 Function 3 Metadata TLV Argument shared between functions TAG Segments Left Locator 1 Locator 2 Locator 3 Function 1 Function 2 Function 3 Metadata TLV Global Argument 2021 Cisco and or its affiliates. All rights reserved. SRv6 Header IPv6 header TAG Segments Left Locator 1 Locator 2 Locator 3 Function 1 Function 2 Function 3 Metadata TLV 2021 Cisco and or its affiliates. All rights reserved. SRv6 for anything TAG Segments Left Locator 1 Locator 2 Locator 3 Function 1 Function 2 Function 3 Metadata TLV 2021 Cisco and or its affiliates. All rights reserved. Turing SRv6 for anything TAG Segments Left Locator 1 Locator 2 Locator 3 Function 1 Function 2 Function 3 Metadata TLV 2021 Cisco and or its affiliates. All rights reserved. Optimized for HW processing e.g. Underlay Tenant use-cases Optimized for SW processing e.g. NFV Container Micro-Service SRv6 Domain 2021 Cisco and or its affiliates. All rights reserved. IPv6 enabled provider infrastructure SR Domain 2 3 1 5 4 Encapsulation at the Domain ingress IPv4 IPv6 or L2 frame is encapsulated within the SR Domain Outer IPv6 header includes an SRH with the list of segments 2 100 3 1 5 4 IPv4 SA A.A.A.A DA B.B.B.B IPv4 SA A.A.A.A DA B.B.B.B Payload Payload IPv6 SA A 1 DA B 0 0 2 C3 SR (B 0 0 5 DB ) SL 1 2021 Cisco and or its affiliates. All rights reserved. SRH of the outer IPv6 encapsulation Domain acts as a giant computer The network program in the outer SRH is executed 2 100 3 1 5 4 IPv4 SA A.A.A.A DA B.B.B.B IPv4 SA A.A.A.A DA B.B.B.B IPv6 SA A 1 DA B 0 0 2 C3 SR (B 0 0 5 DB ) SL 1 IPv6 SA A 1 DA B 0 0 5 DB IPv4 SA A.A.A.A DA B.B.B.B Payload Payload Payload 2021 Cisco and or its affiliates. All rights reserved. Decapsulation at Domain Egress Egress PE removes the outer IPv6 header as the packet leaves the SR domain 2 100 3 1 5 4 IPv4 SA A.A.A.A DA B.B.B.B IPv4 SA A.A.A.A DA B.B.B.B IPv6 SA A 1 DA B 0 0 2 C3 SR (B 0 0 5 DB ) SL 1 IPv6 SA A 1 DA B 0 0 5 DB IPv4 SA A.A.A.A DA B.B.B.B Payload Payload Payload IPv4 SA A.A.A.A DA B.B.B.B Payload 2021 Cisco and or its affiliates. All rights reserved. End-to-End Integrity End-to-end integrity principle is strictly guaranteed Inner packet is unmodified Same as SR-MPLS (MPLS stack is replaced by IPv6 outer header and SRH) 2 100 3 1 Zero Modification 5 4 IPv4 SA A.A.A.A DA B.B.B.B IPv4 SA A.A.A.A DA B.B.B.B IPv6 SA A 1 DA B 0 0 2 C3 SR (B 0 0 5 DB ) SL 1 IPv6 SA A 1 DA B 0 0 5 DB IPv4 SA A.A.A.A DA B.B.B.B Payload Payload Payload IPv4 SA A.A.A.A DA B.B.B.B Payload 2021 Cisco and or its affiliates. All rights reserved. End and End.X SID behaviors End Default endpoint behavior shortest-path to the SID s endpoint endpoint updates DA with next SID endpoint forwards according to updated DA End.X Endpoint with cross-connect shortest-path to SID s endpoint endpoint updates DA with next SID endpoint forwards to interface associated with SID Illustration convention IPv6 address of node k is A k SRv6 SID of node k is B 0 0 k function 2 B 0 0 2 1 End SID SRv6 Domain 2 4 B 0 0 2 C4 End.X SID SRv6 Domain 2021 Cisco and or its affiliates. All rights reserved. Endpoint behaviors illustration SR B 0 0 4 1 B 0 0 5 C6 A 8 1 2 3 4 50 5 6 7 8 Default metric 10 B 0 0 4 1 shortest path to node 4 B 0 0 5 C6 shortest path to node 5 then cross-connect towards 6 A 8 regular IPv6 address of node 8 2021 Cisco and or its affiliates. All rights reserved. IETF 2021 Cisco and or its affiliates. All rights reserved. SR Architecture RFC 8402 Proposed Standard Defines SR-MPLS with MPLS dataplane and Label SID s Defines SRv6 with SRH and SRv6 SID s 2021 Cisco and or its affiliates. All rights reserved. SRv6 RFC 8754 Proposed Standard SRv6 DataPlane SRH and SRv6 SID RFC 8986 Proposed Standard Network Programming (END END.X END.DX DT H.Encaps) In the last IETF stages towards RFC Proposed Standard Control Plane (ISIS BGP-LS) Policy OAM BGP 2021 Cisco and or its affiliates. All rights reserved. SR is IETF Proposed Standard Architecture Use-cases Segment Routing Architecture RFC 8402 Source Packet Routing in Networking (SPRING) Problem Statement and Requirements RFC 7855 Segment Routing with MPLS data plane RFC 8660 IPv6 Segment Routing Header (SRH) RFC 8754 Segment Routing over IPv6 (SRv6) Network Programming RFC 8986 SR-MPLS over IP RFC 8663 Resiliency Use Cases in SPRING Networks RFC 8355 Use Cases for IPv6 Source Packet Routing in Networking (SPRING) RFC 8354 BGP Prefix Segment in Large-Scale Data Centers RFC 8670 Interconnecting Millions Of Endpoints With Segment Routing RFC 8604 Segment Routing interworking with LDP RFC 8661 Recommendations for RSVP-TE and Segment Routing LSP co-existance RFC 8426 Cisco Leads Standards Bodies Protocol Extensions IS-IS Extensions for Segment Routing RFC 8667 Signaling MSD (Maximum SID Depth) using IS-IS RFC 8491 Advertising L2 Bundle Member Link Attributes in IS-IS RFC 8668 IS-IS Traffic Engineering (TE) Metric Extensions RFC 7810 Editor of 96% IETF RFCs Co-author of 100% IETF RFCs OSPF OSPF Extensions for Segment Routing RFC 8665 OSPFv3 Extensions for Segment Routing RFC 8666 Signaling MSD (Maximum SID Depth) using OSPF RFC 8476 OSPF Traffic Engineering (TE) Metric Extensions RFC 7471 Editor of 77% IETF WG Drafts Co-author of 84% IETF WG Drafts PCEP PCEP Extensions for Segment Routing RFC 8664 ISIS BGP Segment Routing Prefix SID extensions for BGP RFC 8669 BGP-LS Advertisement of IGP Traffic Engineering Performance Metric Extensions RFC 8571 OAM Performance Measurement A Scalable and Topology-Aware MPLS Dataplane Monitoring System RFC 8403 Label Switched Path (LSP) Ping Trace for Segment Routing Networks Using MPLS Dataplane RFC 8287 Packet Loss and Delay Measurement for MPLS Networks RFC 6374 UDP Return Path for Packet Loss and Delay Measurement for MPLS Networks RFC 7876 2021 Cisco and or its affiliates. All rights reserved. 1 Up-to-date list on https segment-routing.net ietf SRv6 Deployed Use-Cases 2021 Cisco and or its affiliates. All rights reserved. TI-LFA Overlay 10.0.0.0 8 via B 0 0 4 V9 B 0 0 4 64 Pri via 3 FRR B 0 0 6 C5 1 2 6 High metric 3 5 4 VRF 9 10.0.0.0 8 50msec Protection upon local link node or Optimum backup path SRLG failure Simple to operate and understand automatically computed by the router s IGP process 100% coverage across any topology predictable (backup post-convergence) 2021 Cisco and or its affiliates. All rights reserved. leverages the post-convergence path avoid any intermediate flap via alternate path Incremental deployment Distributed and Automated Intelligence TI-LFA Overlay 10.0.0.0 8 via B 0 0 4 V9 1 50mec FRR B 0 0 4 64 Pri via 3 FRR B 0 0 6 C5 2 6 High metric 3 5 4 VRF 9 10.0.0.0 8 B 0 0 6 C5 50msec Protection upon local link node or Optimum backup path SRLG failure Simple to operate and understand automatically computed by the router s IGP process 100% coverage across any topology predictable (backup post-convergence) 2021 Cisco and or its affiliates. All rights reserved. leverages the post-convergence path avoid any intermediate flap via alternate path Incremental deployment Distributed and Automated Intelligence TILFA - Scaling Note in SRv6 using base format SIDs 1 SID is rarely needed on the backup path due to the global reachability of the End.X SIDs (Adj-SIDs) essentially combining Node-SID + Adj-SID into a single SID 2021 Cisco and or its affiliates. All rights reserved. Microloops Overlay 10.0.0.0 8 via B 0 0 4 V9 1 2 6 3 4 VRF 9 10.0.0.0 8 5 Microloops are a day-one IP drawback Unsynchronized distributed convergence and IP hop-by-hop routing can cause transient packet loops after a topology change Microloops cause packet loss and out-of-order packets 2021 Cisco and or its affiliates. All rights reserved. SR Microloop Avoidance Overlay 10.0.0.0 8 via B 0 0 4 V9 1 2 6 3 4 VRF 9 10.0.0.0 8 5 B 0 0 5 C4 SR Microloop Avoidance temporarily steers traffic on the loop-free post- convergence paths using SR Policies After the network has converged the SR Policies are deactivated 2021 Cisco and or its affiliates. All rights reserved. VPN over Best-Effort 5G Slice Network Program B 0 0 3 V9 B 40 locator block is associated with ISIS base algo (Low Cost Best Effort) 1 6 2 5 3 VRF 9 No SRH 2021 Cisco and or its affiliates. All rights reserved. VPN with Low-Delay 5G Slice SR-TE Option Network Program B 0 0 2 C5 then B 0 0 3 V9 B 40 locator block is associated with ISIS base algo (Low Cost) 1 6 2 5 Bad Delay Bad Delay 3 VRF 9 SRH contains 1 single SID 2021 Cisco and or its affiliates. All rights reserved. VPN with Low-Delay 5G Slice Flex-Algo Option Network Program D 0 0 3 V9 D 40 locator block is associated with Low Delay Flex-Algo 1 6 2 5 Bad Delay Bad Delay 3 VRF 9 No SRH 2021 Cisco and or its affiliates. All rights reserved. Snort Firewall VPN Low-Delay Slice Network Program D 0 0 2 SNORT then D 0 0 3 V9 D 40 locator block is associated with Low Delay Flex-Algo D 0 0 2 SNORT 1 6 2 5 Bad Delay Bad Delay 3 VRF 9 SRH contains 1 Single SID 2021 Cisco and or its affiliates. All rights reserved. EVPN VPWS Single-Home Low-Delay 5G Slice Network Program D 0 0 3 X1 D 40 locator block is associated with Low Delay Flex-Algo 1 6 2 5 Bad Delay Bad Delay 3 EVI 9 AC 1 No SRH 2021 Cisco and or its affiliates. All rights reserved. EVPN VPWS MH All-Active Best-Effort 5G Slice Network Program B 0 0 3 X1 or B 0 0 4 X1 B 40 locator block is associated with ISIS base algo (Low Cost) 1 load-balance 2 5 3 EVI 9 AC 1 4 EVI 9 AC 1 No SRH 2021 Cisco and or its affiliates. All rights reserved. Load-balancing 20-bit entropy No additional protocol infamous mpls entropy label 2021 Cisco and or its affiliates. All rights reserved. Load-balancing Action at the ingress of SRv6 domain Flow Label is the result of the hash of the inner packet IPv4 SA A.A.A.2 DA B.B.B.B IPv6 IPv4 SA A1 DA A5 FL 22 SA A.A.A.2 DA B.B.B.B Payload Payload 3 1 6 2 5 2021 Cisco and or its affiliates. All rights reserved. Load-balancing Action at a transit node Outer Flow Label used for hashing IPv6 IPv4 SA A1 DA A5 FL 22 SA A.A.A.2 DA B.B.B.B 1 6 Payload 2 5 3 2021 Cisco and or its affiliates. All rights reserved. Seamless Incremental Deployment As soon as the network supports plain IPv6 forwarding A new SRv6-VPN service only requires PE upgrade TE objective can be achieved with a few well selected TE waypoints FRR is deployed incrementally 2021 Cisco and or its affiliates. All rights reserved. On-Demand Nexthop Automated Steering A service headend automatically instantiates an SR Policy to a BGP next-hop when required (on-demand) Color community is used as SLA indicator Reminder an SR Policy is defined (color endpoint) BGP Color Community BGP Next-hop Automated Steering (AS) automatically steers the BGP traffic into this SR Policy also based on nexthop and color 2021 Cisco and or its affiliates. All rights reserved. SR-TE On-Demand Nexthop (ODN) RR BGP update 10 8 via Node 3 with color PURPLE Intent PURPLE Min-delay Bad Delay 3 10 8 1 ODN template PURPLE compute min-delay path to BGP nexthop 2 5 Intent of service transport path is signaled by BGP (color community) Best-effort reachability or reachability with SLA PE automatically computes or requests SR-PCE a path to the remote service endpoint and instantiates the SR Policy No pre-configured mesh of SR Policies 2021 Cisco and or its affiliates. All rights reserved. SR-TE Automated Steering (AS) RR BGP update 10 8 via Node 3 with color PURPLE Intent PURPLE Min-delay Bad Delay 3 10 8 1 SR Policy (PURPLE node 3) 2 5 Automatically steer services on the right SR Policy based on color of the service route Provides per-destination SLA No complex steering configuration Data plane performant 2021 Cisco and or its affiliates. All rights reserved. Prefix Summarization 1 3 ISIS Summary B 1 1 48 ISIS Summary B 2 2 48 2 4 METRO 1 Core METRO 2 Back to basic IP routing and summarization No BGP inter-AS Option A B C 2021 Cisco and or its affiliates. All rights reserved. SRv6 has excellent native Scale Many use-cases do not even use an SRH Any VPN (L3VPN PW eVPN) Egress Peering Engineering Low-Latency or Disjoint Slicing Optimal Load-Balancing If SRH is needed most cases will use 1 or 2 SID s Prefix Summarization gain Talk to the operators who deployed they are happy to share experience 2021 Cisco and or its affiliates. All rights reserved. Negligible SRv6 SID block allocation - Iliad Less than 1 billionth of the FC 8 space - 2021 Cisco and or its affiliates. All rights reserved. Negligible Negligible SRv6 SID block allocation - SBB SBB currently has a 20 public IPv6 space from APNIC SBB SRv6 is supported by a 40 sub-block This is only 1 millionth of the current SBB allocation 2021 Cisco and or its affiliates. All rights reserved. SRv6 MPLS L3 Service Interworking Gateway 2021 Cisco and or its affiliates. All rights reserved. Services MPLS SRv6 VPN Interworking Gateway L3VPN services SRv6 VPNv4 unicast MPLS (SR or LDP) VPNv4 unicast SRv6 VPNv6 unicast MPLS (SR or LDP) 6vPE (VPNv6 unicast over IPv4) L3 Global Routing Table (GRT) services SRv6 4PE (global IPv4 unicast over IPv6) MPLS (SR or LDP) global IPv4 unicast SRv6 global IPv6 unicast MPLS (SR or LDP) 6PE (global IPv6 labeled unicast over IPv4) 2021 Cisco and or its affiliates. All rights reserved. L3VPN MPLS to SRv6 BGP(VPNv4 unicast) VRF9 93.0.0.0 8 via 1.1.1.2 Label 90009 BGP(VPNv4 unicast) VRF9 93.0.0.0 8 via B 3 1 SRv6 SID B 3 T9 (End.DT4) Site 91 91.0.0.0 8 9 F R V 1 1.1.1.2 2 B 3 1 9 F R V 3 Site 93 93.0.0.0 8 MPLS Gateway SRv6 IPv4 SA 91.1.1.1 DA 93.1.1.1 IPv4 SA 91.1.1.1 DA 93.1.1.1 IPv4 SA 91.1.1.1 DA 93.1.1.1 IPv4 SA 91.1.1.1 DA 93.1.1.1 Payload Payload Payload Payload MPLS 16002 90009 IPv6 SA B 2 1 DA B 3 T9 Control plane Gateway imports SRv6 service route 93.0.0.0 8 and re-advertises in the MPLS domain with VPN label 90009 Data plane Gateway pops the VPN label 90009 looks up the destination in VRF 9 and pushes the appropriate SRv6 encapsulation 2021 Cisco and or its affiliates. All rights reserved. 1 L3VPN SRv6 to MPLS BGP(VPNv4 unicast) VRF9 91.0.0.0 8 via 1.1.1.1 Label 90009 BGP(VPNv4 unicast) VRF9 91.0.0.0 8 via B 2 1 SRv6 SID B 2 T9 (End.DT4) Site 91 91.0.0.0 8 1.1.1.1 9 F R V 1 B 2 1 2 9 F R V 3 Site 93 93.0.0.0 8 MPLS Gateway SRv6 IPv4 SA 93.1.1.1 DA 91.1.1.1 IPv4 SA 93.1.1.1 DA 91.1.1.1 IPv4 SA 93.1.1.1 DA 91.1.1.1 IPv4 SA 93.1.1.1 DA 91.1.1.1 Payload Payload Payload Payload MPLS 16001 90009 IPv6 SA B 3 1 DA B 2 T9 Control plane Gateway imports MPLS service route 91.0.0.0 8 and re-advertises in the SRv6 domain with End.DT4 SID B 2 T9 Data plane Gateway removes the outer IPv6 header looks up the destination in VRF 9 and pushes the service and nexthop labels 2021 Cisco and or its affiliates. All rights reserved. 1 Services Dual-connected PE L3VPN services SRv6 VPNv4 unicast + MPLS (SR or LDP) VPNv4 unicast SRv6 VPNv6 unicast + MPLS (SR or LDP) 6vPE (VPNv6 unicast over IPv4) L3 Global Routing Table (GRT) services SRv6 4PE (global IPv4 unicast over IPv6) + MPLS (SR or LDP) global IPv4 unicast SRv6 global IPv6 unicast + MPLS (SR or LDP) 6PE (global IPv6 labeled unicast over IPv4) 2021 Cisco and or its affiliates. All rights reserved. SRv6 MPLS Dual-Connected PE BGP (IPv4) Site 94 BGP (IPv6) RR RR Site 91 1 4 3 Site 93 MPLS Dual-connected SRv6 PE The Dual-Connected PE enables customers to directly reach its services from both SRv6 and MPLS remote PEs without passing through a Gateway The Dual-Connected PE advertises its service routes to both MPLS and SRv6 remote PEs MPLS service using IPv4 BGP session SRv6 service using IPv6 BGP session 72 The Dual-Connected PE directly (without GW) reaches service routes of remote SRv6 and MPLS PEs A service route of a remote Dual-Connected PE can be reached via SRv6 XOR MPLS (apply BGP policy to select desired path) 2021 Cisco and or its affiliates. All rights reserved. MPLS L3VPN BGP(VPNv4 unicast) VRF9 94.0.0.0 8 via 1.1.1.4 Label 90009 Site 94 94.0.0.0 8 Site 91 91.0.0.0 8 9 F R V 1 1.1.1.4 IPv4 SA 91.1.1.1 DA 94.1.1.1 Payload 9 F R V 4 9 F R V 3 Site 93 93.0.0.0 8 MPLS Dual-connected SRv6 PE IPv4 SA 91.1.1.1 DA 94.1.1.1 IPv4 SA 91.1.1.1 DA 94.1.1.1 Payload Payload MPLS 16004 90009 Dual-Connected PE4 advertises VPN route 94.0.0.0 8 in IPv4 BGP session with VPN label 90009 Remote MPLS PE1 sends VPN packets to Site 94 using MPLS encapsulation and VPN label PE1 can use SR MPLS or LDP transport to reach PE4 2021 Cisco and or its affiliates. All rights reserved. 1 SRv6 L3VPN Site 94 94.0.0.0 8 BGP(VPNv4 unicast) VRF9 94.0.0.0 8 via B 4 1 SRv6 SID B 4 T9 (End.DT4) Site 91 91.0.0.0 8 9 F R V 1 IPv4 SA 93.1.1.1 DA 94.1.1.1 Payload 9 F R V 4 B 4 1 MPLS Dual-connected SRv6 PE 9 F R V 3 Site 93 93.0.0.0 8 IPv6 SA B 3 1 DA B 4 T9 IPv4 SA 93.1.1.1 DA 94.1.1.1 IPv4 SA 93.1.1.1 DA 94.1.1.1 Payload Payload Dual-Connected PE4 advertises VPN route 94.0.0.0 8 in IPv6 BGP session with End.DT4 SID B 4 T9 Remote SRv6 PE3 sends VPN packets to Site 94 using IPv6 packets with DA SID B 4 T9 2021 Cisco and or its affiliates. All rights reserved. 1 Micro-Program 2021 Cisco and or its affiliates. All rights reserved. Intuitive SRv6 Network Program Program list of instructions contained in DA SRH Instruction SRv6 SID Micro-program SRv6 SID (called container) that contains a list of micro-instructions Micro-Instruction SRv6 uSID can represent any behavior TE VPN Service 2021 Cisco and or its affiliates. All rights reserved. Illustration go to 8 then 7 then 2 and decaps Site A Site B 1 2 4 3 5 6 8 7 One single micro-program in the DA is enough DA bbbb bbbb 0800 0700 0200 FDT4 0000 0000 2021 Cisco and or its affiliates. All rights reserved. Basic IP Routing no new extension ISIS bbbb bbbb 0800 48 1 2 4 3 5 6 8 7 ISIS bbbb bbbb 0200 48 ISIS bbbb bbbb 0700 48 2021 Cisco and or its affiliates. All rights reserved. @1 basic IPv6 Follow the path to bbbb bbbb 0800 48 1 2 4 3 5 6 8 7 DA bbbb bbbb 0800 0700 0200 FDT4 0000 0000 2021 Cisco and or its affiliates. All rights reserved. @4 basic IPv6 Follow the path to bbbb bbbb 0800 48 1 2 4 3 5 6 8 7 DA bbbb bbbb 0800 0700 0200 FDT4 0000 0000 2021 Cisco and or its affiliates. All rights reserved. @5 basic IPv6 Follow the path to bbbb bbbb 0800 48 1 2 4 3 5 6 8 7 DA bbbb bbbb 0800 0700 0200 FDT4 0000 0000 2021 Cisco and or its affiliates. All rights reserved. @8 Shift and Forward 1 2 4 3 5 6 8 7 Rx d DA bbbb bbbb 0800 0700 0200 FDT4 0000 0000 Rx d DA bbbb bbbb 0800 0700 0200 FDT4 0000 0000 SHIFT 16 Tx d DA bbbb bbbb 0700 0200 FDT4 0000 0000 0000 bbbb bbbb 0700 48 FIB Longest-Match bbbb bbbb 0800 48 SRv6 Instruction Shift micro-program by one micro-instruction Set last micro-instruction to End-of-Container Lookup the updated DA and forward 2021 Cisco and or its affiliates. All rights reserved. @7 Shift and Forward 1 2 4 3 5 6 8 7 bbbb bbbb 0200 48 Rx d DA bbbb bbbb 0700 0200 FDT4 0000 0000 0000 Rx d DA bbbb bbbb 0700 0200 FDT4 0000 0000 0000 SHIFT 16 Tx d DA bbbb bbbb 0200 FDT4 0000 0000 0000 0000 FIB Longest-Match bbbb bbbb 0700 48 SRv6 Instruction Shift micro-program by one micro-instruction Set last micro-instruction to End-of-Container Lookup the updated DA and forward 2021 Cisco and or its affiliates. All rights reserved. @6 basic IPv6 1 2 4 3 5 6 8 7 Follow the path to bbbb bbbb 0200 48 DA bbbb bbbb 0200 FDT4 0000 0000 0000 0000 2021 Cisco and or its affiliates. All rights reserved. @3 basic IPv6 1 2 4 3 5 6 8 7 Follow the path to bbbb bbbb 0200 48 DA bbbb bbbb 0200 FDT4 0000 0000 0000 0000 2021 Cisco and or its affiliates. All rights reserved. @2 SRv6 End.DT4 behavior 1 2 4 3 5 6 8 7 Rx d DA bbbb bbbb 0200 FDT4 0000 0000 0000 0000 FIB Longest-Match bbbb bbbb 0200 FDT4 64 SRv6 Instruction Decapsulate and forward inner IPv4 packet to Site B 2021 Cisco and or its affiliates. All rights reserved. Compliant with SRv6 Net Prog and IPv6 100% SRv6 and Net Prog compliant Just another SID just another pseudocode Any SID in SRH or DA can be a uSID container uSIDs can be combined with any other SID IPv6 compliant Leverage classic IP longest-match lookup Leverage classic IP-in-IP Use any IPv6 block available to the operator 2021 Cisco and or its affiliates. All rights reserved. uSID Benefits Data Plane Best MTU efficiency (6 uSIDs without SRH) Hyper-Scalable SR-TE (18 uSIDs with 40 bytes overhead) Hardware-friendly (linerate on merchant silicon) Control Plane Scalable number of globally unique uSIDs per domain No new protocol extensions IP Power IP summarization and longest match is POWERFUL FIB efficiency 2 to 3 times gain vs MPLS Optimal IPv6 load-balancing (flow label) 2021 Cisco and or its affiliates. All rights reserved. SRv6 to the host 2021 Cisco and or its affiliates. All rights reserved. Containers networking Kubernetes (K8s) is the defacto container orchestration platform Cisco (CCP) and others provides on-premise K8s solutions Supported by most cloud providers (Alibaba Azure AWS Google) SRv6-based K8s Fabric Automated overlay Scalable group-based network policies. Scalable service programming. Supported in Contiv (k8s network plugins) 2021 Cisco and or its affiliates. All rights reserved. SmartNICs Increase data path performances while saving server CPU s for to run VNFs and applications workload. SRv6 (decap and proxy) is supported in Intel FPGA N3000 SmartNIC SRv6 encapsulation insertion on their roadmap1 SRv6 Encap Decap and Proxy behaviors are currently supported 2021 Cisco and or its affiliates. All rights reserved. 1 https www.intel.com content dam www programmable us en pdfs literature solution-sheets sb-accelerate-srv6-processing.pdf Conclusion 2021 Cisco and or its affiliates. All rights reserved. Simplicity Always Prevails LDP RSVP-TE Inter-AS Option A B C MPLS UDP VxLAN NSH Furthermore with more scaleand functionality 2021 Cisco and or its affiliates. All rights reserved. At record speed 9+ large-scale commercial deployments Softbank Iliad China Telecom LINE corporation China Unicom CERNET2 China Bank MTN Uganda NOIA Network 25+ HW linerate implementations Cisco Systems Huawei Juniper Arrcus Broadcom Barefoot Intel Marvell Mellanox Kaloom Spirent Ixia Multiple Interop Reports 11+ open-source platforms Applications Linux FD.io VPP P4 iptables nftables snort SERA ExaBGP GoBGP GoBMP Contiv-VPP 2021 Cisco and or its affiliates. All rights reserved. Stay up-to-date SRv6 Part III Coming CY 21 amzn.com B01I58LSUO amazon.com dp B07N13RDM9 twitter.com SegmentRouting segment-routing.net facebook.com SegmentRouting linkedin.com groups 8266623 2021 Cisco and or its affiliates. All rights reserved. 